window.QuickTools=function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n){t.exports=window.Craft},function(t,n,e){"use strict";const i=e(2);window.Craft.usePackage(i.default),t.exports=i.default||i},function(t,n,e){"use strict";e.r(n);var i=e(0);class o extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.PlainButton",t||(t={}),this.label=t.label,this.handler=t.handler}action(){this.handler()}style(t){return"\n\t\t\t.root {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tdisplay: block;\n\t\t\t\theight: 44px;\n\t\t\t\tmargin-top: 5px;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\tcolor: #007aff;\n\t\t\t\tline-height: 44px;\n\t\t\t\ttext-align: center;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tborder-color: #ccc;\n\t\t\t\tborder-width: 1px;\n\t\t\t\tborder-style: solid;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t.root:hover {\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t}\n\t\t"}template(t){return`\n\t\t\t<div class="root" onclick="Craft.Core.ComponentStack.get('${t}').action();">\n\t\t\t\t${this.label}\n\t\t\t</div>\n\t\t`}}class r extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.IconButton",this.icon=t.icon,this.handler=t.handler,this.link=document.createElement("link"),this.link.href=t.iconSource,this.link.rel="stylesheet",this.shadow.appendChild(this.link)}action(){this.handler()}style(t){return"\n\t\t\t.root {\n\t\t\t\twidth: 44px;\n\t\t\t\theight: 44px;\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tcolor: #007aff;\n\t\t\t\tfont-size: 36px;\n\t\t\t\tline-height: 44px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t"}template(t){return`\n\t\t\t<div class="root" onclick="window.Craft.Core.ComponentStack.get('${t}').action();">\n\t\t\t\t<i class="${this.icon}"></i>\n\t\t\t</div>\n\t\t`}}class a extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.ActionSheet",t||(t={}),this.handlers={};for(let n=0;n<t.actions.length;n++)t.actions[n].num=n,this.handlers[n]=t.actions[n].handler;this.actions=t.actions,this.closeHandler=t.closeHandler,this.link=document.createElement("link"),this.link.href=t.iconSource,this.link.rel="stylesheet",this.shadow.appendChild(this.link)}action(t){this.handlers[t](),this.closeActionSheet()}closeActionSheet(){this.viewController.hideContent(()=>{this.closeHandler&&this.closeHandler()})}style(t){return`\n\t\t\t* { \n\t\t\t\tbox-sizing:border-box; margin:0; padding:0;\n\t\t\t}\n\t\t\t:host {\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 100vh;\n\t\t\t\toverflow: hidden;\n\t\t\t\tmargin:0;\n\t\t\t\tpadding-left: 0px;\n\t\t\t\tpadding-right: 0px;\n\t\t\t\ttouch-action: manipulation;\n\t\t\t}\n\t\t\t.root {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: calc( 100vh - env(safe-area-inset-bottom) - env(safe-area-inset-top) ); /* should be fit in the safe area */\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t}\n\t\t\t.container {\n\t\t\t\tdisplay: block;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 0px;\n\t\t\t\twidth: 100vw;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t}\n\t\t\t.list {\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tborder: 0px;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t\twidth: calc( 95% - env(safe-area-inset-left) - env(safe-area-inset-right) );\n\t\t\t}\n\t\t\t.btn {\n\t\t\t\tdisplay: block;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 44px;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tcolor: #2facff;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tline-height: 30px;\n\t\t\t\tborder-top: 0px;\n\t\t\t\tborder-left: 0px;\n\t\t\t\tborder-right: 0px;\n\t\t\t\tborder-bottom: 1px solid rgba(0,0,0,0.1);\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tcursor: pointer;\n\t\t\t\t-webkit-tap-highlight-color:rgba(0,0,0,0);\n\t\t\t\t-webkit-touch-callout: none;\n\t\t\t}\n\t\t\t.btn:active {\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t}\n\t\t\t.btn:focus {\n\t\t\t\toutline: 0px;\n\t\t\t}\n\t\t\t.btn:active {\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t}\n\t\t\t.btn-cancel {\n\t\t\t\tdisplay: block;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t\theight: 44px;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tborder:0px;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tmargin-top: 10px;\n\t\t\t\tmargin-bottom: 10px;\n\t\t\t\tcolor: #2facff;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tline-height: 30px;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tcursor: pointer;\n\t\t\t\t-webkit-tap-highlight-color:rgba(0,0,0,0);\n\t\t\t\t-webkit-touch-callout: none;\n\t\t\t\t${i.UI.Device.hasDisplayCutout()?"width: calc( 95% - env(safe-area-inset-left) - env(safe-area-inset-right) );":"width: 95%;"}\n\t\t\t}\n\t\t\t.btn-cancel:active {\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t}\n\t\t\t.btn-cancel:focus {\n\t\t\t\toutline: 0px;\n\t\t\t}\n\t\t\t.btn-cancel:active {\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t}\n\t\t\t.btn-destructive {\n\t\t\t\tdisplay: block;\n\t\t\t\toverflow-x: hidden;\n\t\t\t\toverflow-y: hidden;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 44px;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tcolor: #eb6767;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tline-height: 30px;\n\t\t\t\tborder-top: 0px;\n\t\t\t\tborder-left: 0px;\n\t\t\t\tborder-right: 0px;\n\t\t\t\tborder-bottom: 1px solid rgba(0,0,0,0.1);\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tcursor: pointer;\n\t\t\t\t-webkit-tap-highlight-color:rgba(0,0,0,0);\n\t\t\t\t-webkit-touch-callout: none;\n\t\t\t}\n\t\t\t.btn-destructive:active {\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t}\n\t\t\t.btn-destructive:focus {\n\t\t\t\toutline: 0px;\n\t\t\t}\n\t\t\t.btn-destructive:active {\n\t\t\t\tbackground-color: #f0f0f0;\n\t\t\t}\n\t\t`}template(t){return`\n\t\t\t<div class="root">\n\t\t\t\t<div class="container">\n\t\t\t\t\t<div class="list">\n\t\t\t\t\t\t${this.actions.map(n=>""+(n.destructive?`<button type="submit" class="btn-destructive" \n\t\t\t\t\t\t\t\t\tonclick="Craft.Core.ComponentStack.get('${t}').action(${n.num});">\n\t\t\t\t\t\t\t\t\t${n.icon?`<i class="${n.icon}" style="margin-right:22px;"></i>`:""}\n\t\t\t\t\t\t\t\t\t${n.title}\n\t\t\t\t\t\t\t\t</button>`:`<button type="submit" class="btn" \n\t\t\t\t\t\t\t\t\tonclick="Craft.Core.ComponentStack.get('${t}').action(${n.num});">\n\t\t\t\t\t\t\t\t\t${n.icon?`<i class="${n.icon}" style="margin-right:22px;"></i>`:""}\n\t\t\t\t\t\t\t\t\t${n.title}\n\t\t\t\t\t\t\t\t</button>`)).join("")}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type="submit" class="btn-cancel" \n\t\t\t\t\t\tonclick="Craft.Core.ComponentStack.get('${t}').closeActionSheet();">Cancel</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`}}class s extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.ActionPanel",t||(t={}),this.target=t.target,this.content=t.content,this.right_margin=22,this.top_margin=0,this.bottom_margin=7,this.listener_serial=""}setContent(t){t.isViewLoaded||t.loadView(),this.content=t,this.root.appendChild(t.view)}handleTouch(t){if(!t)return this.hidePanel(),!1;let n=t.pageX,e=t.pageY,i=this.view.getBoundingClientRect(),o=this.view.clientWidth,r=this.view.clientHeight;return i.left<n&&n<i.left+o&&i.top<e&&e<i.top+r||this.hidePanel(),!1}unloadView(){this.content.unloadView(),super.unloadView()}showPanel(t){this.target=t.target||this.target,this.right_margin=t.right_margin||this.right_margin,this.top_margin=t.top_margin||this.top_margin,this.bottom_margin=t.bottom_margin||this.bottom_margin,this.content.viewWillAppear(),i.Core.Context.getRootViewController().appendView(this),this.content.viewDidAppear(),this.locatePanel(),this.listener_serial=i.Core.NotificationCenter.listen("ContentTapped",t=>{this.handleTouch(t)}),this.listener_serial=i.Core.NotificationCenter.listen("Craft.Widget.QuickTools.ActionPanel.hidePanel",t=>{this.hidePanel(t)}),i.Core.Transition.animate({element:this.view,properties:{opacity:1},duration:50})}locatePanel(){let t=this.target.getBoundingClientRect(),n=t.bottom,e=t.left;this.view.style.top=String(n)+"px",this.view.style.left=String(e)+"px";let i=window.innerWidth,o=this.view.clientWidth;e+o>i&&(this.view.style.left=String(i-o)+"px");let r=window.innerHeight,a=this.view.clientHeight;n+a>r&&(this.view.style.top=String(t.top-a)+"px")}hidePanel(){i.Core.NotificationCenter.remove("ContentTapped",this.listener_serial),i.Core.Transition.animate({element:this.view,properties:{opacity:1},duration:50,callback:()=>{this.content.viewWillDisappear(),this.view.remove(),this.content.viewDidDisappear()}})}style(t){return"\n\t\t\t:host {\n\t\t\t\tdisplay: block;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0px;\n\t\t\t\tcolor: #aaa;\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tborder-radius: 3px;\n\t\t\t\t-webkit-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.2);\n\t\t\t\t-moz-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.2);\n\t\t\t\tbox-shadow: 0 1px 10px rgba(0, 0, 0, 0.2);\n\t\t\t\t-webkit-overflow-scrolling: touch;\n\t\t\t\toverflow: auto;\n\t\t\t\topacity: 0;\n\t\t\t}\n\t\t"}template(t){return'\n\t\t\t<div class="root"></div>\n\t\t'}}class l extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.TipsPanel",t||(t={}),this.panel="",this.text=t.text}closePanel(){this.panel.hidePanel()}style(t){return"\n\t\t\t:host {\n\t\t\t\tposition: relative;\n\t\t\t}\n\t\t\t.root {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding-left: 11px;\n\t\t\t\tpadding-right: 11px;\n\t\t\t\tpadding-top: 5px;\n\t\t\t\tpadding-bottom: 5px;\n\t\t\t\tcolor: #fff;\n\t\t\t\tbackground-color: #444;\n\t\t\t}\n\t\t"}template(t){return`\n\t\t\t<div class="root">${this.text}</div>\n\t\t`}}class c extends i.UI.View{constructor(t){super(),this.packagename="Craft.Widget.QuickTools.TipsPanelable",t||(t={}),this.tips=t.tips,this.content=t.content,this.text=t.text,this.panelClass=t.panelClass||l}viewDidLoad(t){this.tipsPanel=new this.panelClass({text:this.tips}),this.tipsPanel.setViewController(this.viewController),this.tipsPanel.loadView(),this.content?this.setContent(this.content):this.setText(this.text),t&&t()}hideTipsPanel(){this.tipsPanel&&this.tipsPanel.closePanel()}setContent(t){t.isViewLoaded||t.loadView(),this.content=t,this.root.appendChild(t.view)}setText(t){this.content=new i.UI.View,this.content.loadView(),this.content.root.innerHTML=t,this.root.appendChild(this.content.view)}showTipsPanel(){this.actionPanel=new s({base:this}),this.actionPanel.setViewController(this.viewController),this.actionPanel.loadView(),this.actionPanel.setContent(this.tipsPanel),this.actionPanel.showPanel({target:this.root}),this.tipsPanel.panel=this.actionPanel,this.actionPanel.viewWillAppear(),i.Core.Context.getRootViewController().appendView(this.actionPanel),this.actionPanel.viewDidAppear(),this.locatePanel()}locatePanel(){let t=this.content.root.getBoundingClientRect(),n=t.bottom,e=t.left;this.actionPanel.view.style.top=String(n)+"px",this.actionPanel.view.style.left=String(e)+"px";let i=window.innerWidth,o=this.actionPanel.view.clientWidth;e+o>i&&(this.actionPanel.view.style.left=String(i-o)+"px");let r=window.innerHeight,a=this.actionPanel.view.clientHeight;n+a>r&&(this.actionPanel.view.style.top=String(t.top-a)+"px")}style(t){return"\n\t\t\t:host {\n\t\t\t\tdisplay: inline-block;\n\t\t\t}\n\t\t\t.root {\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t"}template(t){return"ontouchend"in window?'<div class="root"></div>':`\n\t\t\t\t<div class="root" \n\t\t\t\t\tonclick="${t}.hideTipsPanel();" \n\t\t\t\t\tonmouseover="${t}.showTipsPanel();" \n\t\t\t\t\tonmouseout="${t}.hideTipsPanel();" \n\t\t\t\t\tonblur="${t}.hideTipsPanel();">\n\t\t\t\t</div>\n\t\t\t`}}const h={PlainButton:o,IconButton:r,ActionSheet:a,ActionPanel:s,TipsPanel:l,TipsPanelable:c,inject:function(t){t.Widget=t.Widget||{},t.Widget.QuickTools||(t.Widget.QuickTools=h)}};n.default=h}]);